{# ===================================================================== #}
{#  Registro de usuarios - Accesibilidad WCAG 2.1 AA                    #}
{# ===================================================================== #}
{% extends 'base.html.twig' %}

{% block title %}Registro - Economik0{% endblock %}

{% block body %}
<section class="container py-5 d-flex justify-content-center" aria-labelledby="registro-heading">
    <article class="card glass-card shadow-lg p-4" style="max-width: 500px; width: 100%;">
        {# ========== ENCABEZADO ========== #}
        <header class="card-body text-center">
            <h1 id="registro-heading" class="card-title fw-bold">
                Crear <span class="text-accent">Cuenta</span>
            </h1>
            <p class="text-muted">Únete a Economik0 y apoya a productores locales</p>
        </header>

        {# ========== FORMULARIO DE REGISTRO ========== #}
        {{ form_start(registrationForm, {
            'attr': {
                'novalidate': 'novalidate',
                'aria-label': 'Formulario de registro de nueva cuenta'
            }
        }) }}

            {# Indicador de campos requeridos #}
            <p class="text-muted small mb-4" id="required-fields-note">
                <span class="text-danger" aria-hidden="true">*</span>
                Los campos marcados son obligatorios
            </p>

            {# Campo Email #}
            <div class="mb-4">
                {{ form_label(registrationForm.email, 'Correo Electrónico', {
                    'label_attr': {'class': 'form-label fw-semibold'}
                }) }}
                <span class="text-danger" aria-hidden="true">*</span>
                {{ form_widget(registrationForm.email, {
                    'attr': {
                        'class': 'form-control form-control-lg',
                        'placeholder': 'tu@email.com',
                        'autocomplete': 'email',
                        'aria-required': 'true',
                        'aria-describedby': 'email-help email-errors'
                    }
                }) }}
                <small id="email-help" class="form-text text-muted">
                    Usaremos este email para tu inicio de sesión
                </small>
                <div id="email-errors" role="alert" aria-live="polite">
                    {{ form_errors(registrationForm.email) }}
                </div>
            </div>

            {# Campo Contraseña #}
            <div class="mb-4">
                {{ form_label(registrationForm.plainPassword, 'Contraseña', {
                    'label_attr': {'class': 'form-label fw-semibold'}
                }) }}
                <span class="text-danger" aria-hidden="true">*</span>
                {{ form_widget(registrationForm.plainPassword, {
                    'attr': {
                        'class': 'form-control form-control-lg',
                        'placeholder': '••••••••',
                        'autocomplete': 'new-password',
                        'aria-required': 'true',
                        'aria-describedby': 'password-help password-errors'
                    }
                }) }}
                <small id="password-help" class="form-text text-muted">
                    Mínimo 6 caracteres para mayor seguridad
                </small>
                <div id="password-errors" role="alert" aria-live="polite">
                    {{ form_errors(registrationForm.plainPassword) }}
                </div>
            </div>

            {# Checkbox de términos (si existe) #}
            {% if registrationForm.agreeTerms is defined %}
                <div class="mb-4 form-check">
                    {{ form_widget(registrationForm.agreeTerms, {
                        'attr': {
                            'class': 'form-check-input',
                            'aria-describedby': 'terms-errors'
                        }
                    }) }}
                    {{ form_label(registrationForm.agreeTerms, 'Acepto los términos y condiciones', {
                        'label_attr': {'class': 'form-check-label'}
                    }) }}
                    <span class="text-danger" aria-hidden="true">*</span>
                    <div id="terms-errors" role="alert" aria-live="polite">
                        {{ form_errors(registrationForm.agreeTerms) }}
                    </div>
                </div>
            {% endif %}

            {# Botón de envío #}
            <button type="submit" class="btn btn-primary btn-lg w-100 mb-3">
                <span aria-hidden="true">✨</span>
                Crear mi cuenta
            </button>

        {{ form_end(registrationForm) }}

        {# ========== ENLACES ADICIONALES ========== #}
        <footer class="text-center mt-3">
            <p class="mb-2 text-muted">
                ¿Ya tienes cuenta?
            </p>
            <a href="{{ path('app_login') }}" class="btn btn-outline-secondary">
                Iniciar sesión
            </a>
        </footer>
    </article>
</section>
{% endblock %}
